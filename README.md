# OrthoMCL_Results_Processing (OMRP)
This Python3 program will take the orthomcl output (groups, proteomes and singletons) and produce different human readable results

# Python3 Dependencies
**pyvenn** (_already available in this repo as venn_l_, original reference: https://github.com/tctianchi/pyvenn)

**matplotlib 3.3.4 (Required)** -> Used by pyvenn to generate venn diagrams

**Spacy 3.0.3 (Optionnal, use --ignore_spacy flag to skip)** -> Regroup similar protein function annotation according to their textual similarity

**en_core_web_lg dictionnary for Spacy** -> Gives best results during testing

# Usage:
  
  -g GROUP_FILE, --group GROUP_FILE
  
                        Group file containing proteins groups [REQUIRED]
                        
  -s SINGLETONS_FILE, --singleton SINGLETONS_FILE
  
                        Singleton file containing single proteins [OPTIONAL]
                        
  -p PROTEOME_FILE, --proteome PROTEOME_FILE
  
                        Fasta file regrouping all proteomes (MUST INCLUDE
                        PROTEIN ANNOTATION AND ID MUST BE SEPERATE BY A SPACE)
                        [OPTIONAL]
                        
  -c SPC_LIST, --species SPC_LIST
  
                        Species tag list used in data (ex: TBE,COVI,...) [REQUIRED]
                        
  -r REGROUP_LIST, --regroup REGROUP_LIST
  
                        List of species you want to regroup (; to link ,to
                        seperate) SP1;SP2,SP3;SP4 means 1 regroup with SP1 and
                        SP2 and 1 regroup with SP3 and SP4 [OPTIONAL]
                        
  -l TABLE_LIMIT, --limit TABLE_LIMIT
  
                        Ortho Table limit for cluster count (every cluster >=
                        this value will have their count add to the same value
                        (Val+)) ! higher value means more columns in the table
                        ! [DEFAULT=11]
                        
  --venn_dpi DPI
  
                        Pixel Density for Venn Diagram greater value means
                        sharper but bigger png [DEFAULT=400]
                        
  --ignore_spacy
  
                        Ignore Spacy step to reduce annotation count (remove
                        spacy dependency, MUCH faster, but will produce a
                        massive annotation CSV)
                        
  --spacy_simthres SPACY_THRES
  
                        Similarity threshold for spacy annotation regrouping
                        MODIFY AT YOUR OWN RISK [DEFAULT=0.95]
                        
  --spacy_pipeline SPACY_PIPE
  
                        Spacy language pipeline to use (all the developpement was
                        done with en_core_web_lg, so it's not recommended to
                        use another) [default=en_core_web_lg]
                        
  -o OUTPUT_FOLDER, --output OUTPUT_FOLDER
  
                        Output folder name [Default=orthomcl_resgen_out/]
                        
                        
 # Input file
 
This program takes the OrthoMCL output files (singletons.txt and groups.txt) as is. The proteomes file must be generated by the user (a simple cat *.fasta > proteomes.fasta will do the trick) DO NOT USE THE COMPLIANT FASTA SEQUENCE GENERATED BY ORTHOMCL, it must be the original proteome files
 
All the proteomes sequences must have a unique sequence identifier AND a protein functional annotation
 
The singletons file can be ommited if you don't want to include the singletons in your results

# OrthoTable
After preparing the groups according to the species and regroups lists, OMRP will compile the protein counts into the OrthoTable (which contain the group count for every species combination possible andn their protein count (up to --limit). This table will be save in OrthoTable.tsv

# Venn Diagrams
Using the information in OrthoTable, 3 venn diagrams will be generated; B C and P. P_venn will use the protein count, C will use the group count and B will contain both information (group_count on top and protein count in parenthesis at the bottom). Please note that the program
